FROM debian:bookworm

# To expand optional arguments for install.sh in CMD.
ARG INSTALL_ARGS=""
ENV INSTALL_ARGS=${INSTALL_ARGS}

RUN apt-get update && \
    apt-get upgrade -y && \
    apt-get install -y sudo openssh-server ca-certificates curl tree

COPY ./install.sh /install.sh
# Fetch dotfiles repository locally
COPY . /dotfiles
RUN chmod +x ./install.sh

CMD ["bash", "-c", "./install.sh ${INSTALL_ARGS}"]
